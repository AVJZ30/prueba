<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Notas PÃºblicas AnÃ³nimas</title>
<style>
body { font-family: Arial; background:#f4f4f4; padding:20px }
textarea { width:100%; height:80px }
button { padding:10px; margin-top:5px }
li { background:white; margin:5px 0; padding:10px; border-radius:5px }
</style>
</head>

<body>

<h2>ğŸ“ Notas pÃºblicas anÃ³nimas</h2>

<textarea id="nota" placeholder="Escribe algo..."></textarea>
<br>
<button onclick="guardar()">Publicar</button>

<ul id="lista"></ul>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js";
import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js";
import { getFirestore, collection, addDoc, getDocs, query, orderBy } from "https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js";

/* ğŸ”‘ TUS DATOS (YA LOS TIENES) */
const firebaseConfig = {
  apiKey: "AIzaSyA28ieu5X3SbY-_1XJoPlZF7mcU67xrfls",
  authDomain: "prueba-d573b.firebaseapp.com",
  projectId: "prueba-d573b"
};

/* ğŸš€ INICIAR FIREBASE */
const app = initializeApp(firebaseConfig);
const auth = getAuth();
const db = getFirestore();

/* ğŸ‘¤ LOGIN ANÃ“NIMO */
signInAnonymously(auth);

/* âœï¸ GUARDAR NOTA */
window.guardar = async function () {
  const texto = document.getElementById("nota").value;
  if (texto.trim() === "") return;

  await addDoc(collection(db, "notas"), {
    texto: texto,
    fecha: new Date()
  });

  document.getElementById("nota").value = "";
  cargar();
}

/* ğŸ“¥ CARGAR NOTAS */
async function cargar() {
  const lista = document.getElementById("lista");
  lista.innerHTML = "";

  const q = query(collection(db, "notas"), orderBy("fecha", "desc"));
  const datos = await getDocs(q);

  datos.forEach(doc => {
    const li = document.createElement("li");
    li.textContent = doc.data().texto;
    lista.appendChild(li);
  });
}

cargar();
</script>

</body>
</html>
